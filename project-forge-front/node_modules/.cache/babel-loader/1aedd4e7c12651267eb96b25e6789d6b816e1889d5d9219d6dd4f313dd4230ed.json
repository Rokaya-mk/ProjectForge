{"ast":null,"code":"import axios from 'axios';\nexport default {\n  async singIn({\n    commit,\n    dispatch\n  }, credential) {\n    commit('setError', '');\n    try {\n      const response = await axios.post('login', credential);\n      dispatch('attempt', response.data.token);\n    } catch (error) {\n      if (error.response && error.response.status === 401) {\n        commit('setError', 'Invalid username or password');\n      } else {\n        commit('setError', 'An error occurred. Please try again.');\n      }\n    }\n  },\n  async attempt({\n    commit,\n    state\n  }, token) {\n    try {\n      if (token) {\n        commit('setToken', token);\n      }\n      if (!state.token) {\n        return;\n      }\n      const response = await axios.get('user-profile');\n      console.log(response.data);\n      console.log('success');\n      commit('setUser', response.data);\n    } catch (error) {\n      console.log(error, 'fail2');\n      commit('setToken', null);\n      commit('setUser', null);\n    }\n  },\n  // logout user \n  logout({\n    commit\n  }) {\n    axios.post(\"logout\").then(response => {\n      commit('setToken', null);\n      commit('setUser', null);\n      console.log(\"user logout successfully:\", response);\n    }).catch(error => {\n      console.error(\"Error loging user:\", error);\n    });\n  }\n};","map":{"version":3,"names":["axios","singIn","commit","dispatch","credential","response","post","data","token","error","status","attempt","state","get","console","log","logout","then","catch"],"sources":["D:/PROJETS/LARAVEL/project-forge-front/src/store/auth/actions.js"],"sourcesContent":["import axios from 'axios';\r\nexport default {\r\n    async singIn({ commit,dispatch }, credential) {\r\n        commit('setError', '');\r\n        try {\r\n            const response = await axios.post('login', credential);\r\n            dispatch('attempt', response.data.token)\r\n        } catch (error) {\r\n            if (error.response && error.response.status === 401) {\r\n                commit('setError', 'Invalid username or password');\r\n              } else {\r\n                commit('setError', 'An error occurred. Please try again.');\r\n              }\r\n        }\r\n    },\r\n\r\n    async attempt({ commit, state }, token) {\r\n        try {\r\n            if (token) {\r\n                commit('setToken', token);\r\n            }\r\n            if (!state.token) { return; }\r\n            const response = await axios.get('user-profile');\r\n            console.log(response.data)\r\n            console.log('success')\r\n            commit('setUser', response.data);\r\n        } catch (error) {\r\n            console.log(error, 'fail2')\r\n            commit('setToken', null);\r\n            commit('setUser', null);\r\n        }\r\n    },\r\n    // logout user \r\n    logout({commit}){\r\n        axios.post(\"logout\")\r\n        .then((response) => {\r\n            commit('setToken', null);\r\n            commit('setUser', null);\r\n            console.log(\r\n                \"user logout successfully:\",\r\n                response\r\n            );\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Error loging user:\", error);\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n}"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,eAAe;EACX,MAAMC,MAAMA,CAAC;IAAEC,MAAM;IAACC;EAAS,CAAC,EAAEC,UAAU,EAAE;IAC1CF,MAAM,CAAC,UAAU,EAAE,EAAE,CAAC;IACtB,IAAI;MACA,MAAMG,QAAQ,GAAG,MAAML,KAAK,CAACM,IAAI,CAAC,OAAO,EAAEF,UAAU,CAAC;MACtDD,QAAQ,CAAC,SAAS,EAAEE,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC;IAC5C,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZ,IAAIA,KAAK,CAACJ,QAAQ,IAAII,KAAK,CAACJ,QAAQ,CAACK,MAAM,KAAK,GAAG,EAAE;QACjDR,MAAM,CAAC,UAAU,EAAE,8BAA8B,CAAC;MACpD,CAAC,MAAM;QACLA,MAAM,CAAC,UAAU,EAAE,sCAAsC,CAAC;MAC5D;IACN;EACJ,CAAC;EAED,MAAMS,OAAOA,CAAC;IAAET,MAAM;IAAEU;EAAM,CAAC,EAAEJ,KAAK,EAAE;IACpC,IAAI;MACA,IAAIA,KAAK,EAAE;QACPN,MAAM,CAAC,UAAU,EAAEM,KAAK,CAAC;MAC7B;MACA,IAAI,CAACI,KAAK,CAACJ,KAAK,EAAE;QAAE;MAAQ;MAC5B,MAAMH,QAAQ,GAAG,MAAML,KAAK,CAACa,GAAG,CAAC,cAAc,CAAC;MAChDC,OAAO,CAACC,GAAG,CAACV,QAAQ,CAACE,IAAI,CAAC;MAC1BO,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;MACtBb,MAAM,CAAC,SAAS,EAAEG,QAAQ,CAACE,IAAI,CAAC;IACpC,CAAC,CAAC,OAAOE,KAAK,EAAE;MACZK,OAAO,CAACC,GAAG,CAACN,KAAK,EAAE,OAAO,CAAC;MAC3BP,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC;MACxBA,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC;IAC3B;EACJ,CAAC;EACD;EACAc,MAAMA,CAAC;IAACd;EAAM,CAAC,EAAC;IACZF,KAAK,CAACM,IAAI,CAAC,QAAQ,CAAC,CACnBW,IAAI,CAAEZ,QAAQ,IAAK;MAChBH,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC;MACxBA,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC;MACvBY,OAAO,CAACC,GAAG,CACP,2BAA2B,EAC3BV,QACJ,CAAC;IACL,CAAC,CAAC,CACDa,KAAK,CAAET,KAAK,IAAK;MACdK,OAAO,CAACL,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC9C,CAAC,CAAC;EACN;AAUJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}