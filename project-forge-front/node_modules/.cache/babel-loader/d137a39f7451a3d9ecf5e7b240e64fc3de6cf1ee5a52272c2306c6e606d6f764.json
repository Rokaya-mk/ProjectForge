{"ast":null,"code":"import FlashMessage from \"@/components/FlashMessage.vue\";\nimport { mapActions, mapGetters } from 'vuex';\nexport default {\n  components: {\n    FlashMessage\n  },\n  data() {\n    return {\n      searchData: {\n        search_type: \"name\",\n        search_value: \"\"\n      }\n    };\n  },\n  computed: {\n    /* access to getter with mapgetter \r\n    userRoles : verify roles of this authenticated user \r\n    userPermissions : get the permissions of this user\r\n    */\n    ...mapGetters({\n      'authenticated': 'auth/authenticated',\n      'userRoles': 'user/userRoles',\n      'userPermissions': 'user/userPermissions',\n      'roles': 'role/roles'\n    })\n  },\n  mounted() {\n    this.getRoles();\n    this.$store.dispatch('user/getUserRolesPermissions');\n  },\n  methods: {\n    ...mapActions({\n      'setFlashMessage': 'flash/setFlashMessage',\n      searchRole: 'role/searchRole'\n    }),\n    search() {\n      this.searchRole(this.searchData);\n    },\n    hasRole(role) {\n      return this.userRoles.has(role);\n    },\n    // get role list\n    getRoles() {\n      this.$store.dispatch(\"role/getRoles\");\n    },\n    // delete role\n    deleteRole(role) {\n      if (confirm(\"Are you sure you want to delete Role!\")) {\n        this.$store.dispatch(\"role/deleteRole\", role).then(() => {\n          this.setFlashMessage({\n            message: 'Role was Deleted !!',\n            type: 'alert-success'\n          });\n          this.getRoles();\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["FlashMessage","mapActions","mapGetters","components","data","searchData","search_type","search_value","computed","mounted","getRoles","$store","dispatch","methods","searchRole","search","hasRole","role","userRoles","has","deleteRole","confirm","then","setFlashMessage","message","type"],"sources":["D:\\PROJETS\\LARAVEL\\project-forge-front\\src\\views\\managment\\roles\\index.vue"],"sourcesContent":["<template v-if=\"roles\" lang=\"\">\r\n        <FlashMessage ref=\"flashMessage\"></FlashMessage>\r\n    <div class=\"row\" v-if=\"authenticated\">\r\n        <div class=\"col-md-12\">\r\n            <div class=\"d-flex justify-content-between bg-dark p-3 rounded\">\r\n                <h5 class=\"text-light\">Roles</h5>\r\n                <router-link class=\"btn btn-success float-right\" :to=\"{name: 'create-role'}\">\r\n                    Create New Role\r\n                </router-link>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"row\" >\r\n        <div class=\"col-md-12\">\r\n            <div class=\"row px-5 d-flex justify-content-around align-items-center mb-2\">\r\n                <div class=\"col-md-3\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"search_type\">Search Type</label>\r\n                        <select  class=\"form-control\" v-model=\"searchData.search_type\">\r\n                            <option value=\"name\">Name</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-md-3\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"search_value\">Search Value</label>\r\n                        <input type=\"text\" class=\"form-control\" \r\n                                v-model=\"searchData.search_value\" \r\n                                @keyup=\"search\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-md-3  mt-1\">\r\n                    <button @click=\"search\" class=\"btn btn-success\">\r\n                        <i class=\"fa fa-search\"></i>\r\n                    </button>\r\n                    \r\n                </div>\r\n            </div>\r\n            <div class=\"table-responsive\">\r\n                <table class=\"table table-hover\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>#</th>\r\n                            <th>Name</th>\r\n                            <th>Display Name</th>\r\n                            <th>Description</th>\r\n                            <th v-if=\"userPermissions.has('roles-update','roles-delete')\">\r\n                                Actions\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                            <tr v-for=\"(role, index) in roles.data\" :key=\"index\">\r\n                                <td>{{index + 1}}</td>\r\n                                <td>{{ role.name }}</td>\r\n                                <td>{{ role.display_name }}</td>\r\n                                <td>{{ role.description }}</td>\r\n                                <td v-if=\"userPermissions.has('roles-update')\">\r\n                                    <div class=\"d-inline-block\">\r\n                                        <router-link :to=\"{name:'edit-role' ,params :{id: role.id} }\" class=\"btn btn-success mr-2\">\r\n                                            <i class=\"fa fa-edit\"></i>\r\n                                        </router-link>\r\n                                    </div>\r\n                                    <button class=\"btn btn-danger mx-1\"\r\n                                            v-if=\"userPermissions.has('roles-delete')\"\r\n                                            @click=\"deleteRole(role)\">\r\n                                            <i class=\"fa fa-trash\"></i>\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport FlashMessage from \"@/components/FlashMessage.vue\";\r\nimport { mapActions, mapGetters } from 'vuex';\r\n\r\nexport default {\r\n    components:{\r\n        FlashMessage\r\n    },\r\n    data(){\r\n        return{\r\n            searchData: {\r\n                    search_type: \"name\",\r\n                    search_value: \"\",\r\n            },\r\n        }\r\n    },\r\n    computed: {\r\n         /* access to getter with mapgetter \r\n        userRoles : verify roles of this authenticated user \r\n        userPermissions : get the permissions of this user\r\n        */\r\n        ...mapGetters({    \r\n            'authenticated' : 'auth/authenticated',  \r\n            'userRoles' : 'user/userRoles',\r\n            'userPermissions' : 'user/userPermissions',\r\n            'roles' : 'role/roles',\r\n\r\n        }),\r\n    },\r\n    mounted(){\r\n        \r\n        this.getRoles()\r\n        this.$store.dispatch('user/getUserRolesPermissions');\r\n      \r\n    },\r\n    methods: {\r\n        ...mapActions({\r\n            'setFlashMessage' : 'flash/setFlashMessage',\r\n            searchRole : 'role/searchRole',\r\n        }),\r\n        search(){\r\n            this.searchRole(this.searchData)\r\n        },\r\n        hasRole(role) {\r\n            return this.userRoles.has(role);\r\n        },\r\n        // get role list\r\n        getRoles() {\r\n            this.$store.dispatch(\"role/getRoles\");\r\n        },\r\n        // delete role\r\n        deleteRole(role) {\r\n            if (confirm(\"Are you sure you want to delete Role!\")) {\r\n                this.$store\r\n                    .dispatch(\"role/deleteRole\", role)\r\n                    .then(() => {\r\n                        this.setFlashMessage({ message: 'Role was Deleted !!', type: 'alert-success' });\r\n                        this.getRoles();\r\n                    });\r\n            }\r\n        },   \r\n    },\r\n}\r\n</script>\r\n<style lang=\"\">\r\n    \r\n</style>"],"mappings":"AA6EA,OAAOA,YAAW,MAAO,+BAA+B;AACxD,SAASC,UAAU,EAAEC,UAAS,QAAS,MAAM;AAE7C,eAAe;EACXC,UAAU,EAAC;IACPH;EACJ,CAAC;EACDI,IAAIA,CAAA,EAAE;IACF,OAAM;MACFC,UAAU,EAAE;QACJC,WAAW,EAAE,MAAM;QACnBC,YAAY,EAAE;MACtB;IACJ;EACJ,CAAC;EACDC,QAAQ,EAAE;IACL;;;;IAID,GAAGN,UAAU,CAAC;MACV,eAAc,EAAI,oBAAoB;MACtC,WAAU,EAAI,gBAAgB;MAC9B,iBAAgB,EAAI,sBAAsB;MAC1C,OAAM,EAAI;IAEd,CAAC;EACL,CAAC;EACDO,OAAOA,CAAA,EAAE;IAEL,IAAI,CAACC,QAAQ,CAAC;IACd,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,8BAA8B,CAAC;EAExD,CAAC;EACDC,OAAO,EAAE;IACL,GAAGZ,UAAU,CAAC;MACV,iBAAgB,EAAI,uBAAuB;MAC3Ca,UAAS,EAAI;IACjB,CAAC,CAAC;IACFC,MAAMA,CAAA,EAAE;MACJ,IAAI,CAACD,UAAU,CAAC,IAAI,CAACT,UAAU;IACnC,CAAC;IACDW,OAAOA,CAACC,IAAI,EAAE;MACV,OAAO,IAAI,CAACC,SAAS,CAACC,GAAG,CAACF,IAAI,CAAC;IACnC,CAAC;IACD;IACAP,QAAQA,CAAA,EAAG;MACP,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,eAAe,CAAC;IACzC,CAAC;IACD;IACAQ,UAAUA,CAACH,IAAI,EAAE;MACb,IAAII,OAAO,CAAC,uCAAuC,CAAC,EAAE;QAClD,IAAI,CAACV,MAAK,CACLC,QAAQ,CAAC,iBAAiB,EAAEK,IAAI,EAChCK,IAAI,CAAC,MAAM;UACR,IAAI,CAACC,eAAe,CAAC;YAAEC,OAAO,EAAE,qBAAqB;YAAEC,IAAI,EAAE;UAAgB,CAAC,CAAC;UAC/E,IAAI,CAACf,QAAQ,CAAC,CAAC;QACnB,CAAC,CAAC;MACV;IACJ;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}